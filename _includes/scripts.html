{% if site.footer_scripts %}
{% for script in site.footer_scripts %}
<script src="{{ script | relative_url }}"></script>
{% endfor %}
{% else %}
<script src="{{ '/assets/js/main.min.js' | relative_url }}"></script>
{% endif %}

{% if site.search == true or page.layout == "search" %}
{%- assign search_provider = site.search_provider | default: "lunr" -%}
{%- case search_provider -%}
{%- when "lunr" -%}
{% include_cached search/lunr-search-scripts.html %}
{%- when "google" -%}
{% include_cached search/google-search-scripts.html %}
{%- when "algolia" -%}
{% include_cached search/algolia-search-scripts.html %}
{%- endcase -%}
{% endif %}

{% include analytics.html %}
{% include /comments-providers/scripts.html %}

<!-- Swup PJAX for persistent audio -->
<script src="https://unpkg.com/swup@4/dist/Swup.umd.js"></script>
<script src="https://unpkg.com/@swup/head-plugin@2/dist/Index.umd.js"></script>
<script src="https://unpkg.com/@swup/scripts-plugin@2/dist/Index.umd.js"></script>
<script src="{{ '/assets/js/swup-init.js' | relative_url }}" data-swup-ignore-script></script>

<!-- Global Mini Player - Ultra-fast, Page Independent -->
<script src="{{ '/assets/js/global-mini-player.js' | relative_url }}" data-swup-ignore-script></script>
<script src="{{ '/assets/js/player-bridge.js' | relative_url }}" data-swup-ignore-script></script>

{% if site.after_footer_scripts %}
{% for script in site.after_footer_scripts %}
<script src="{{ script | relative_url }}"></script>
{% endfor %}
{% endif %}

<!-- Add LaTex function -->
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML">
  </script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    },
    "HTML-CSS": { availableFonts: ["TeX"] }
  });
</script>